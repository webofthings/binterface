{"version":3,"sources":["../../../client/app/monitor/monitor.controller.js"],"names":[],"mappings":"AAAA;;;;;;AACA,CAAC,YAAU;MAEL;AACL,aADK,gBACL,CAAY,QAAZ,EAAsB,MAAtB,EAA8B,IAA9B,EAAoC,MAApC,EAA4C;;;4BADvC,kBACuC;;AACzC,aAAO,OAAP,GAAiB,OAAjB,CADyC;AAEzC,WAAK,QAAL,GAAgB,QAAhB,CAFyC;AAGzC,WAAK,GAAL,GAAW,SAAS,MAAT,EAAX,CAHyC;AAIzC,WAAK,IAAL,GAAY,SAAS,OAAT,EAAZ,CAJyC;AAKzC,WAAK,MAAL,GAAc,MAAd,CALyC;AAMzC,WAAK,IAAL,GAAY,IAAZ,CANyC;AAOzC,aAAO,IAAI,GAAJ,CAAQ;AACb,aAAK,QAAL;AACA,uBAAgB,SAAS,UAAT,GAAsB,EAAtB;OAFX,EAGJ,IAHI,CAGC,UAAC,KAAD,EAAW;AACjB,cAAK,IAAL,GAAY,MAAM,MAAN,CAAa,UAAS,IAAT,EAAe;AACpC,iBAAO,KAAK,IAAL,CAAU,OAAV,CAAkB,kBAAlB,MAA0C,CAAC,CAAD,CADb;SAAf,CAAzB,CADiB;;AAKjB,gBAAQ,GAAR,CAAY,MAAK,IAAL,CAAZ,CALiB;;AAOjB,cAAK,MAAL,GAAc,MAAK,IAAL,CAAU,GAAV,CAAc,UAAS,IAAT,EAAc;AACxC,iBAAO,IAAP,CADwC;SAAd,CAAd,CAEX,MAFW,CAEJ,UAAS,IAAT,EAAe;AACvB,iBAAO,KAAK,UAAL,CAAgB,GAAhB,GAAsB,EAAtB,CADgB;SAAf,CAFI,CAIX,MAJW,CAPG;;AAajB,gBAAQ,GAAR,CAAY,EAAZ,EAAgB,MAAK,MAAL,CAAhB,CAbiB;;AAejB,YAAI,YAAJ,CAfiB;AAgBjB,eAAO,MAAP,CAAc,YAAW;AACvB,iBAAO,MAAP,GAAgB,KAAK,MAAL,KAAgB,CAAhB,GAAoB,MAApB,GAA6B,KAA7B,CADO;SAAX,CAAd,CAhBiB;OAAX,CAHR,CAPyC;KAA5C;;iBADK;;mCAmCS;AACX,eAAO,OAAP,CADW;;;;+BAIJ;;;AAEP,aAAK,GAAL,CAAS,IAAT,CAAc;AACZ,gBAAM,QAAN;AACA,oBAAW,KAAX;AACA,4BAAmB,IAAnB;AACA,+BAAsB,IAAtB;AACA,mBAAS;AACL,qBAAS,IAAT;AACA,qBAAS;AACL,qBAAO,OAAP;aADJ;WAFJ;AAMA,qBAAW,IAAX;SAXF,EAaC,IAbD,CAaM,UAAC,MAAD,EAAW;AACb,iBAAK,MAAL,CAAY,EAAZ,CAAe,KAAf,EADa;SAAX,EAED,UAAC,GAAD,EAAS;AACV,kBAAQ,GAAR,CAAY,KAAZ,EAAmB,GAAnB,EADU;SAAT,CAfL,CAFO;;;;WAvCL;MAFK;;AAgEX,UAAQ,MAAR,CAAe,eAAf,EACG,SADH,CACa,SADb,EACwB;AACpB,iBAAa,0BAAb;AACA,gBAAY,gBAAZ;GAHJ,EAhEW;CAAV,CAAD","file":"monitor.controller.js","sourcesContent":["'use strict';\n(function(){\n\nclass MonitorComponent {\n constructor(Evrythng, $state, bins, $scope) {\n    $scope.message = 'Hello';\n    this.Evrythng = Evrythng;\n    this.app = Evrythng.getApp();\n    this.user = Evrythng.getUser();\n    this.$state = $state;\n    this.bins = bins;\n    return EVT.api({\n      url :'/thngs',\n      authorization : Evrythng.getOptions().op\n    }).then((thngs) => {\n      this.bins = thngs.filter(function(thng) {\n          return thng.name.indexOf('Waste_container_') !== -1\n      });\n\n      console.log(this.bins)\n\n      this.status = this.bins.map(function(item){\n        return item;\n      }).filter(function(item) {\n        return item.properties.usv < 20;\n      }).length;\n\n      console.log('', this.status)\n\n      var that = this;\n      $scope.$apply(function() {\n        $scope.status = that.status === 0 ? 'good' : 'bad';\n      });\n\n    });\n\n  }\n\n  getmessage() {\n    return 'HEllo'\n  }\n\n  byScan() {\n\n    this.app.scan({\n      type: 'qrcode',\n      redirect : false,\n      createScanAction : true,\n      createAnonymousUser : true,\n      spinner: {\n          enabled: true,\n          options: {\n              color: 'black'\n          }\n      },\n      invisible: true\n    })\n    .then((result) =>{\n        this.$state.go('bin');\n      }, (err) => {\n        console.log('err', err)\n      });\n  }\n}\n\nangular.module('binterfaceApp')\n  .component('monitor', {\n    templateUrl: 'app/monitor/monitor.html',\n    controller: MonitorComponent\n  });\n\n})();\n"]}